apiVersion: v1
kind: Secret
metadata:
  name: extraignition-mgmt
type: Opaque
stringData:
  ignition: |
    passwd:
      users:
        - name: "{{ printf "{{ resolve `vault+kvv2:///secrets/%s/cc-gardener/nodes/compute-user/username` }}" $.Values.global.region }}"
          password_hash: "{{ printf "{{ resolve `vault+kvv2:///secrets/%s/cc-gardener/nodes/compute-user/passwordHash` }}" $.Values.global.region }}"
          groups: [ "wheel" ]
          ssh_authorized_keys:
            - "{{ printf "{{ resolve `vault+kvv2:///secrets/%s/cc-gardener/nodes/compute-pki/public` }}" $.Values.global.region }}"
