{{- if .Values.yellowPages.enabled }}
apiVersion: v1
kind: Secret
metadata:
  name: yellow-pages-secrets
  namespace: datahub
  labels:
    app.kubernetes.io/name: yellow-pages
    helm.sh/chart: {{ include "datahub.chart" $ }}
    app.kubernetes.io/instance: {{ .Release.Name }}
    app.kubernetes.io/managed-by: {{ .Release.Service }}
data:
  datahubAdminPW: {{ required "missing DatahubDB root pw" .Values.mariadb.root_password }}
  datahubRonlyPW: {{ required "missing DatahubDB ronly pw" .Values.global.datahub.password }}
  billingToken: {{ required "missing billing API token" .Values.yellowPages.billingApiToken}}

{{- end}}