apiVersion: v1
kind: Secret
metadata:
  name: {{ template "sentry.fullname" . }}
  labels:
    app: {{ template "sentry.fullname" . }}
    chart: "{{ .Chart.Name }}-{{ .Chart.Version }}"
    release: "{{ .Release.Name }}"
    heritage: "{{ .Release.Service }}"
type: Opaque
data:
  {{- if .Values.secretKey }}
  sentry-secret-key: {{ default "" .Values.secretKey | b64enc | quote }}
  {{- else }}
  sentry-secret-key: {{ randAscii 50 | b64enc | quote }}
  {{- end }}
  {{- if .Values.adminUser.token }}
  admin-api-token: {{ .Values.adminUser.token | b64enc }}
  {{- end }}
  {{- if .Values.adminUser.password }}
  admin-password: {{ .Values.adminUser.password | b64enc }}
  {{- end }}
  {{- if .Values.emailUser }}
  sentry-email-user: {{ .Values.emailUser | b64enc }}
  {{- end }}
  {{- if .Values.emailPassword }}
  sentry-email-password: {{ .Values.emailPassword | b64enc }}
  {{- end }}
  {{- if .Values.githubAppId }}
  github-app-id: {{ default "" .Values.githubAppId | b64enc | quote }}
  {{- end }}
  {{- if .Values.githubClientId }}
  github-client-id: {{ default "" .Values.githubClientId | b64enc | quote }}
  {{- end }}
  {{- if .Values.githubClientSecret }}
  github-client-secret: {{ default "" .Values.githubClientSecret | b64enc | quote }}
  {{- end }}
  {{- if .Values.githubWebhookSecret }}
  github-webhook-secret: {{ default "" .Values.githubWebhookSecret | b64enc | quote }}
  {{- end }}
  {{- if .Values.githubPrivateKeySecret }}
  github-private-key-secret: {{ default "" .Values.githubPrivateKeySecret | b64enc | quote }}
  {{- end }}
