apiVersion: apps/v1
kind: Deployment
metadata:
  name: ipxe-operator-controller-manager
  namespace: ipxe-operator-system
spec:
  template:
    spec:
      containers:
        - name: manager
          args:
            - --health-probe-bind-address=:8081
            - --metrics-bind-address=127.0.0.1:8080
            - --leader-elect
            - --default-ipxe-server-url=http://[2a10:afc0:e013:d002::]:30007
            - --default-kernel-url=http://[2a10:afc0:e013:d002::]:30007/image?imageName=ghcr.io/ironcore-dev/os-images/gardenlinux&version=1443.3&layerName=vmlinuz
            - --default-initrd-url=http://[2a10:afc0:e013:d002::]:30007/image?imageName=ghcr.io/ironcore-dev/os-images/gardenlinux&version=1443.3&layerName=initramfs
            - --default-squashfs-url=http://[2a10:afc0:e013:d002::]:30007/image?imageName=ghcr.io/ironcore-dev/os-images/gardenlinux&version=1443.3&layerName=squashfs
            - --ipxe-service-url=http://[2a10:afc0:e013:d002::]:30007
            - --controllers=ipxebootconfig,serverbootconfig,httpbootconfig
