{{/*
  Constraint objects cannot be included in the Helm manifest directly.
  See templates/configmap-delayed-payloads.yaml and templates/job-apply-delayed-payloads.yaml for details.
*/}}
{{- define "libtest-traversal" -}}

{{- if eq .Values.cluster_type "test" -}}

apiVersion: constraints.gatekeeper.sh/v1beta1
kind: GkLibtestTraversal
metadata:
  name: libtest-traversal
spec:
  enforcementAction: dryrun
  match: {{ include "match_pods_and_pod_owners" . | indent 4 }}

{{- end -}}


{{- end -}}
