apiVersion: v2
name: gatekeeper
description: OPA Gatekeeper deployment for sapcc
type: application
version: 1.0.0 # please leave like this; this does not use Chartmuseum

dependencies:
  - name: gatekeeper
    alias: gatekeeper-upstream
    version: 3.21.0
    repository: file://vendor/gatekeeper-upstream
    # ^ We have to vendor to apply custom patches for linkerd support.
    #
    # To upgrade to a new version:
    # - Run `./vendor-update.sh`.
    # - Review the diff (e.g. `git add -p`).
    #   - Accept changes from upstream.
    #   - Reject the deletion of linkerd annotations.
    #   - If upstream changes add new pods, add linkerd annotations as necessary.
    # - Adjust the `version:` above to match the vendored Chart.yaml.
    # - Run `helm dep up` on this chart and commit everything.
    #
    # To verify a version upgrade prepared by someone else:
    # - Run `./vendor-update.sh`.
    # - Now `git diff` should only show deleted linkerd annotations that were not in the upstream version.
  - name: linkerd-support
    repository: oci://keppel.eu-de-1.cloud.sap/ccloud-helm
    version: '>= 0.0.0'
  - name: owner-info
    repository: oci://keppel.eu-de-1.cloud.sap/ccloud-helm
    version: '>= 0.0.0'
