apiVersion: v1
kind: ConfigMap
metadata:
  name: ironic-config
  namespace: {{ .Release.Namespace }}
data:
  DEPLOY_KERNEL_URL: http://{{ .Values.ironic.externalIP }}:{{ .Values.ironic.ipxePort }}/images/ironic-python-agent.kernel
  DEPLOY_RAMDISK_URL: http://{{ .Values.ironic.externalIP }}:{{ .Values.ironic.ipxePort }}/images/ironic-python-agent.initramfs
  HTTP_PORT: "{{ .Values.ironic.ipxePort }}"
  IRONIC_ENDPOINT: https://metal3-ironic.{{ .Values.global.region }}.{{ .Values.global.tld }}:{{ .Values.ironic.ironicPort }}/v1/
  IRONIC_FAST_TRACK: "true"
  IRONIC_ENABLE_VLAN_INTERFACES: all
  USE_IRONIC_INSPECTOR: "false"
  IRONIC_KERNEL_PARAMS: console=ttyS0
  PROVISIONING_INTERFACE: {{ .Values.ironic.provisionInterface }}
  RESTART_CONTAINER_CERTIFICATE_UPDATED: "false"
  IRONIC_RAMDISK_SSH_KEY: {{ .Values.ironic.auth.ipaSshKey }}
  IRONIC_URL_HOST: metal3-ironic.{{ .Values.global.region }}.{{ .Values.global.tld }}
  IRONIC_IP: {{ .Values.ironic.externalIP }}
  IPA_BASEURI: {{ .Values.ironic.ipa.baseUri }} 
  IPA_BRANCH: {{ .Values.ironic.ipa.branch }}
  RESTART_CONTAINER_CERTIFICATE_UPDATED: "true"
  IRONIC_TLS_SETUP: "true"
  IRONIC_CACERT_FILE: "/certs/ironic/ca.crt"
