apiVersion: addons.cluster.x-k8s.io/v1alpha1
kind: HelmChartProxy
metadata:
  name: metallb
spec:
  clusterSelector:
    matchLabels:
      cluster.x-k8s.io/cluster-name: rt-{{ .Values.global.region }}
  repoURL: https://metallb.github.io/metallb
  chartName: metallb
  releaseName: cc-metallb
  version: 0.15.2
  namespace: metallb-system
  options:
    waitForJobs: true
    wait: true
    timeout: 5m
    install:
      createNamespace: true
  valuesTemplate: |
    crds:
      enabled: true
    controller:
      image:
        repository: "keppel.global.cloud.sap/ccloud-quay-mirror/metallb/controller"
    speaker:
      image:
        repository: "keppel.global.cloud.sap/ccloud-quay-mirror/metallb/speaker"
      ignoreExcludeLB: true
      frr:
        enabled: false
