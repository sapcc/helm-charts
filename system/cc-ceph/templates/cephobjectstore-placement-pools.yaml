{{- range $target := .Values.rgwTargetPlacements }}
apiVersion: ceph.rook.io/v1
kind: CephBlockPool
metadata:
  name: {{ $target.name }}.rgw.buckets.data
spec:
  failureDomain: host
  replicated:
    size: {{ $target.size }}
  crushRoot: {{ $target.crushRoot }} 
  deviceClass: hdd
  application: rgw
  parameters:
    pg_num: "256"
    pgp_num: "256"
---
apiVersion: ceph.rook.io/v1
kind: CephBlockPool
metadata:
  name: {{ $target.name }}.rgw.buckets.index
spec:
  failureDomain: host
  replicated:
    size: {{ $target.size }}
  crushRoot: {{ $target.crushRoot }} 
  deviceClass: nvme
  application: rgw
  parameters:
    pg_num: "128"
    pgp_num: "128"
---
apiVersion: ceph.rook.io/v1
kind: CephBlockPool
metadata:
  name: {{ $target.name }}.rgw.buckets.non-ec
spec:
  failureDomain: host
  replicated:
    size: {{ $target.size }}
  crushRoot: {{ $target.crushRoot }} 
  deviceClass: nvme
  application: rgw
  parameters:
    pg_num: "32"
    pg_num: "32"
---
{{- end }}
