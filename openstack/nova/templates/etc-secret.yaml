apiVersion: v1
kind: Secret
metadata:
  name: nova-etc
  labels:
    system: openstack
    type: configuration
    component: nova
data:
  api-db.conf: |
    {{ include (print .Template.BasePath "/etc/_api-db.conf.tpl") . | b64enc | indent 4 }}
  {{- $envAll := . }}
  {{- range $cellId := include "nova.helpers.cell_ids_all" . | fromJsonArray }}
  {{- $cellName := include "nova.helpers.cell_name" (tuple $envAll $cellId) }}
  {{ $cellName }}.conf: |
    {{ include "nova.cell_conf" (tuple $envAll $cellId) | b64enc | indent 4 }}
  {{- end }}
  keystoneauth-secrets.conf: |
    {{ include (print .Template.BasePath "/etc/_keystoneauth-secrets.conf.tpl") . | b64enc | indent 4 }}
  audit-middleware.conf: |
    {{ include "ini_sections.audit_middleware_notifications" . | b64enc | indent 4 }}
  osprofiler.conf: |
    {{ include "osprofiler" . | b64enc | indent 4 }}
