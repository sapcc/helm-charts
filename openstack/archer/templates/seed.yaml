apiVersion: "openstack.stable.sap.cc/v1"
kind: "OpenstackSeed"
metadata:
  name: {{ include "archer.name" . }}-seed
  namespace: monsoon3
  labels:
    {{- include "archer.labels" . | nindent 4 }}
spec:
  requires:
    - {{ required ".Values.global.keystoneNamespace required" .Values.global.keystoneNamespace }}/keystone-seed

  services:
    - name: {{ include "archer.name" . }}
      type: endpoint-services
      description: private endpoint services
      endpoints:
        - interface: public
          region: '{{.Values.global.region}}'
          url: 'https://{{include "archer_api_endpoint_public" .}}'

  domains:
    - name: Default
      users:
        - name: archer
          description: 'Archer Service'
          password: {{ .Values.global.archer_service_password | quote }}
          role_assignments:
            - project: service
              role: service