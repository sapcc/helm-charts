apiVersion: v1
kind: Secret
metadata:
  name: vcenter-operator
  labels:
    {{- tuple . "vcenter-operator" "operator" | include "helm-toolkit.snippets.kubernetes_metadata_labels" | nindent 4 }}
data:
  namespace: {{ .Values.global.keystoneNamespace | b64enc }}
  username: {{ .Values.username | include "resolve_secret" | b64enc }}
  password: {{ .Values.global.vcenter_operator_master_password | include "resolve_secret" | b64enc }}
  tsig_key: {{ .Values.tsig_key | include "resolve_secret" | b64enc }}
  manage_service_user_passwords: {{ .Values.manage_service_user_passwords | toString | b64enc }}
  {{- if .Values.manage_service_user_passwords }}
  role_id: {{ .Values.role_id | include "resolve_secret" | b64enc }}
  secret_id: {{ .Values.secret_id | include "resolve_secret" | b64enc }}
  ad_ttu_username: {{ .Values.ad_ttu_username | include "resolve_secret" | b64enc }}
  ad_ttu_password: {{ .Values.ad_ttu_password | include "resolve_secret" | b64enc }}
  active_directory: {{ .Values.active_directory | b64enc }}
  vault_url: {{ .Values.vault_url | b64enc }}
  mount_point_read: {{ .Values.mount_point_read | b64enc }}
  mount_point_write: {{ .Values.mount_point_write | b64enc }}
  max_time_not_seen: {{ .Values.max_time_not_seen | toString | b64enc }}
  vault_check_interval: {{ .Values.vault_check_interval | toString | b64enc }}
  password_digits: {{ .Values.password_digits | toString | b64enc }}
  password_length: {{ .Values.password_length | toString | b64enc }}
  password_symbols: {{ .Values.password_symbols | toString | b64enc }}
  {{- end }}
{{- range $key, $value := .Values.variables }}
  {{ $key }}: {{ $value | include "resolve_secret" | b64enc }}
{{- end }}
