{{- if .Values.pod.pdb.enabled }}
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: {{ .Release.Name }}-api
spec:
  minAvailable: {{ .Values.pod.pdb.min_available }}
  selector:
    matchLabels:
      app: {{ .Release.Name }}-api
---
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: {{ .Release.Name }}-central
spec:
  minAvailable: {{ .Values.pod.pdb.min_available }}
  selector:
    matchLabels:
      app: {{ .Release.Name }}-central
---
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: {{ .Release.Name }}-mdns
spec:
  minAvailable: {{ .Values.pod.pdb.min_available }}
  selector:
    matchLabels:
      app: {{ .Release.Name }}-mdns
---
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: {{ .Release.Name }}-producer
spec:
  minAvailable: {{ .Values.pod.pdb.min_available }}
  selector:
    matchLabels:
      app: {{ .Release.Name }}-producer
---
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: {{ .Release.Name }}-worker
spec:
  minAvailable: {{ .Values.pod.pdb.min_available }}
  selector:
    matchLabels:
      app: {{ .Release.Name }}-worker
{{- end }}
