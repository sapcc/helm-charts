groups:
- name: availability.alerts
  rules:
  - alert: OpenstackElektraPodAvailabilityLow
    expr: (sum(up{name="elektra", container="rails"}) BY (region) / count(up{name="elektra", container="rails"}) BY (region)) < 0.5
    for: 3m
    labels:
      context: openstack
      dashboard: elektra-details
      service: elektra
      severity: warning
      tier: os
      support_group: containers
    annotations:
      description:  |
        ðŸ“Š Elektra Pod Availability Alert - Region {{ $labels.region }}
        
        â€¢ Threshold: 50% minimum required
        â€¢ Last Measured: {{ $value | humanizePercentage }} (at last evaluation)
        â€¢ Evaluation Period: 3 minutes
        
        Alert Status:
        ðŸ”´ RED alert = Currently below 50%
        ðŸŸ¢ GREEN alert = Recovered above 50%
        
        Note: "Last Measured" may not reflect current state when resolved
        
        Quick Actions:
        â€¢ Check pods: kubectl -n elektra get pods -l name=elektra
        â€¢ View Dashboard: https://dashboard.{{ $labels.region }}.cloud.sap
      summary: 'Elektra pod availability threshold alert - {{ $labels.region }}'
