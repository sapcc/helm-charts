apiVersion: v1
kind: Secret
metadata:
  name: cerebro-vernemq-credentials
  labels:
    chart: "{{ .Chart.Name }}-{{ .Chart.Version }}"
    release: "{{ .Release.Name }}"
type: Opaque
data:
  password: {{ randAlphaNum 12 | b64enc | quote }}
---
apiVersion: v1
kind: Secret
metadata:
  name: cc-prometheus-certs
  labels:
    chart: "{{ .Chart.Name }}-{{ .Chart.Version }}"
    release: "{{ .Release.Name }}"
type: Opaque
data:
  cerebro_prometheus_sso-key.pem: {{ index .Values.secrets.ccPrometheus "cerebro_prometheus_sso-key.pem" | b64enc | quote }}
  cerebro_prometheus_sso.pem: {{ index .Values.secrets.ccPrometheus "cerebro_prometheus_sso.pem" | b64enc | quote }}

{{- range $param := $.Values.secrets.fileSecrets }}
---
apiVersion: v1
kind: Secret
metadata:
  name: {{ required "$param.metadata.name missing" $param.metadata.name }}
  labels:
    chart: "{{ $.Chart.Name }}-{{ $.Chart.Version }}"
    release: "{{ $.Release.Name }}"
type: Opaque
data:
  content: {{ required "$param.data.content missing" $param.data.content | b64enc | quote }}
{{- end }}
