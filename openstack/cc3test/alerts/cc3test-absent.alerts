groups:
- name: cc3test-absent.alerts
  rules:
  - alert: CCloudApiTestNotRunningWell
    expr: increase(cc3test_finished_seconds{type="api"}[20]) == 0
    labels:
      severity: warning
      service: cc3test
      context: '{{ $labels.service }}'
      dashboard: cc3test-overview
      meta: 'cc3test {{ $labels.type }}/{{ $labels.name }} is not running for more than 20 minutes'
    annotations:
      description: 'cc3test {{ $labels.type }}/{{ $labels.name }} is not running for more than 20 minutes'
      summary: 'cc3test {{ $labels.type }}/{{ $labels.name }} is down'

  - alert: CCloudDatapathTestNotRunningWell
    expr: increase(cc3test_finished_seconds{type="datapath"}[40m]) == 0
    labels:
      severity: warning
      service: cc3test
      context: '{{ $labels.service }}'
      dashboard: cc3test-overview
      meta: 'cc3test {{ $labels.type }}/{{ $labels.name }} is not running for more than 40 minutes'
    annotations:
      description: 'cc3test {{ $labels.type }}/{{ $labels.name }} is not running for more than 40 minutes'
      summary: 'cc3test {{ $labels.type }}/{{ $labels.name }} is down'

  - alert: CCloudCanaryTestNotRunningWell
    expr: increase(cc3test_finished_seconds{type="canary"}[1h]) == 0
    labels:
      severity: warning
      service: cc3test
      context: '{{ $labels.service }}'
      dashboard: cc3test-overview
      meta: 'cc3test {{ $labels.type }}/{{ $labels.name }} is not running for more than 10 minutes'
    annotations:
      description: 'cc3test {{ $labels.type }}/{{ $labels.name }} is not running for more than 10 minutes'
      summary: 'cc3test {{ $labels.type }}/{{ $labels.name }} is down'
