---
apiVersion: v1
kind: Secret
metadata:
  name: migrate-{{ .Values.name }}-db-secrets
  namespace: {{ .Release.Namespace }}
  labels:
{{ include "pxc-db.labels" . | indent 4 }}
data:
  targetDBPW: {{ required "missing target db password" .Values.system_users.root.password | b64enc | quote }}
  sourceDBPW: {{ required "missing source db password" .Values.job.migration.source.password | b64enc | quote }}
  openstackPW: {{ required "missing backups openstack swift password" .Values.job.migration.swift.password | b64enc }}
  awsAccessKeyID: {{ required "missing AWS Access Key ID" $.Values.global.backup_v2.aws_access_key_id | b64enc }}
  awsSecretAccessKey: {{ required "missing AWS Secret Access Key" $.Values.global.backup_v2.aws_secret_access_key | b64enc }}
  awsS3SSECustomerKey: {{ required "missing AWS S3 SSE Customer Key" $.Values.global.mariadb.backup_v2.aws.sse_customer_key | b64enc }}
